# Production Environment Configuration for PGB4 Message Board Docker Compose

# =============================================================================
# BUILD CONFIGURATION
# =============================================================================
BUILD_VERSION=1.0.0

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================
DB_NAME=pgb_prod
DB_USERNAME=pgb_prod_user
# SECURITY: Use Docker secrets or external secret management in production
DB_PASSWORD=CHANGE_ME_IN_PRODUCTION
DB_ROOT_PASSWORD=CHANGE_ME_IN_PRODUCTION
DB_PORT=3306

# Production database settings
DB_POOL_SIZE=30
DB_POOL_MIN_IDLE=15
JPA_DDL_AUTO=validate
JPA_SHOW_SQL=false

# =============================================================================
# BACKEND CONFIGURATION
# =============================================================================
SERVER_PORT=8080
CONTEXT_PATH=

# Production logging
LOG_LEVEL=WARN
APP_LOG_LEVEL=INFO

# Production performance settings
ASYNC_CORE_SIZE=20
ASYNC_MAX_SIZE=40
ASYNC_QUEUE_CAPACITY=200

# Production JVM settings
JVM_MIN_HEAP=1g
JVM_MAX_HEAP=2g

# Production resource limits
BACKEND_MEMORY_LIMIT=2.5G
BACKEND_CPU_LIMIT=2.0
BACKEND_MEMORY_RESERVATION=1G
BACKEND_CPU_RESERVATION=1.0

# =============================================================================
# FRONTEND CONFIGURATION
# =============================================================================
FRONTEND_PORT=3000
# IMPORTANT: Change this to your actual production API URL
FRONTEND_API_URL=https://api.yourdomain.com/api/v1

# Production nginx settings
NGINX_WORKERS=auto
NGINX_CONNECTIONS=2048
NGINX_MAX_BODY_SIZE=32M

# Production resource limits
FRONTEND_MEMORY_LIMIT=512M
FRONTEND_CPU_LIMIT=1.0
FRONTEND_MEMORY_RESERVATION=256M
FRONTEND_CPU_RESERVATION=0.5

# =============================================================================
# REDIS CONFIGURATION
# =============================================================================
REDIS_PORT=6379
# SECURITY: Use Docker secrets in production
REDIS_PASSWORD=CHANGE_ME_IN_PRODUCTION
REDIS_MEMORY_LIMIT=256M
REDIS_CPU_LIMIT=0.5

# =============================================================================
# LOAD BALANCER CONFIGURATION
# =============================================================================
LB_PORT=80
LB_SSL_PORT=443

# =============================================================================
# STORAGE CONFIGURATION
# =============================================================================
# Production data directories (absolute paths recommended)
DATA_DIR=/var/lib/pgb4
LOGS_DIR=/var/log/pgb4

# =============================================================================
# NETWORK CONFIGURATION
# =============================================================================
NETWORK_SUBNET=172.21.0.0/16

# =============================================================================
# SECURITY CONFIGURATION
# =============================================================================
# Enable security features in production
COOKIE_SECURE=true
COOKIE_HTTP_ONLY=true
COOKIE_SAME_SITE=strict

# =============================================================================
# MONITORING CONFIGURATION
# =============================================================================
PROMETHEUS_ENABLED=true
HEALTH_SHOW_DETAILS=never
ACTUATOR_ENDPOINTS=health,info,metrics,prometheus