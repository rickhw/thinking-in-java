# 實作計劃 - 單一訊息顯示頁面

- [x] 1. 創建 SingleMessage 核心組件
  - 建立 `frontend/src/components/SingleMessage.jsx` 組件檔案
  - 實作基本的組件結構，包含狀態管理（message, loading, error）
  - 使用 useParams 從 URL 獲取 messageId 參數
  - 實作 useEffect 來載入訊息資料，調用 getMessageById API
  - _需求: 1.1, 1.2, 1.3_

- [x] 2. 實作訊息內容顯示功能
  - 在 SingleMessage 組件中實作訊息內容的顯示邏輯
  - 顯示訊息作者、創建時間、更新時間和內容
  - 實作載入狀態的 UI（骨架屏或載入指示器）
  - 實作 404 錯誤頁面，當訊息不存在時顯示友好的錯誤訊息
  - _需求: 1.2, 1.3, 4.4_

- [x] 3. 實作用戶權限控制和操作按鈕
  - 整合 UserContext 來獲取當前登入用戶資訊
  - 實作條件渲染邏輯：僅為訊息作者顯示編輯和刪除按鈕
  - 為未登入用戶和非作者隱藏操作按鈕
  - 實作按鈕的基本 UI 和點擊事件處理
  - _需求: 2.1, 2.2, 2.3_

- [ ] 4. 實作訊息編輯功能
  - 在 SingleMessage 組件中添加編輯狀態管理（isEditing, editContent）
  - 實作編輯模式的切換：點擊編輯按鈕時顯示編輯表單
  - 建立編輯表單 UI，包含文字區域和儲存/取消按鈕
  - 實作編輯內容的提交邏輯，調用 updateMessage API
  - 處理非同步操作的狀態追蹤和 UI 回饋
  - _需求: 2.4_

- [ ] 5. 實作訊息刪除功能
  - 實作刪除確認對話框的顯示邏輯
  - 建立確認對話框 UI 組件或使用瀏覽器原生 confirm
  - 實作刪除操作的提交邏輯，調用 deleteMessage API
  - 處理刪除成功後的頁面重定向（返回首頁或上一頁）
  - 實作刪除操作的載入狀態和錯誤處理
  - _需求: 2.5_

- [x] 6. 實作導航和連結功能
  - 在 SingleMessage 組件中添加返回所有訊息列表的連結
  - 實作查看訊息作者所有訊息的連結，導航到 `/user/{userId}/messages`
  - 將作者名稱設為可點擊連結，導航到作者的訊息列表頁面
  - 實作頁面載入失敗時的重新載入按鈕
  - _需求: 3.1, 3.2, 3.3, 3.4_

- [x] 7. 更新路由配置
  - 在 `frontend/src/App.jsx` 中添加新的路由 `/message/:messageId`
  - 將路由指向 SingleMessage 組件
  - 測試路由導航是否正常工作
  - 確保路由與現有的路由系統相容
  - _需求: 1.1_

- [x] 8. 更新 MessageList 組件添加 permalink
  - 修改 `frontend/src/components/MessageList.jsx`
  - 為每個訊息項目添加「查看詳情」連結，指向 `/message/{messageId}`
  - 確保連結在不同的訊息列表頁面（首頁、用戶頁面、個人頁面）都能正常工作
  - 測試從列表頁面導航到單一訊息頁面的流程
  - _需求: 5.3_

- [x] 9. 實作響應式設計和樣式
  - 為 SingleMessage 組件添加 CSS 樣式
  - 實作桌面版佈局（居中顯示，最大寬度限制）
  - 實作移動版佈局（全寬度，垂直堆疊按鈕）
  - 確保在不同螢幕尺寸下都有良好的可讀性
  - 實作載入狀態和錯誤狀態的視覺設計
  - _需求: 4.1, 4.2, 4.3, 4.5_

- [x] 10. 實作 SEO 優化和頁面標題
  - 整合或創建 PageContext 來動態設置頁面標題
  - 實作基於訊息內容的動態頁面標題設置
  - 在訊息載入完成後更新瀏覽器標題欄
  - 為錯誤頁面設置適當的標題
  - _需求: 1.4, 5.1, 5.2_

- [x] 11. 實作錯誤處理和使用者體驗優化
  - 實作網路錯誤的處理和重試機制
  - 實作權限錯誤的友好提示
  - 添加適當的載入指示器和狀態回饋
  - 實作錯誤邊界來捕獲組件錯誤
  - 確保所有錯誤狀態都有適當的使用者指引
  - _需求: 4.4, 4.5, 5.4_

- [ ] 12. 整合測試和功能驗證
  - 測試單一訊息頁面的完整載入流程
  - 測試不同用戶權限下的功能可用性
  - 測試編輯和刪除操作的完整流程
  - 測試錯誤情況的處理（訊息不存在、網路錯誤等）
  - 測試響應式設計在不同設備上的表現
  - 驗證所有導航連結和路由的正確性
  - _需求: 1.1, 1.2, 1.3, 2.1, 2.2, 2.3, 2.4, 2.5, 3.1, 3.2, 3.3, 3.4, 4.1, 4.2, 4.3, 4.4, 4.5_