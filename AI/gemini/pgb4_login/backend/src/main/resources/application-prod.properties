# Production Environment Configuration
# This file contains production-specific settings that override the default application.properties

# Server Configuration
server.port=${SERVER_PORT:8080}
server.servlet.context-path=${CONTEXT_PATH:}
server.compression.enabled=true
server.compression.mime-types=text/html,text/xml,text/plain,text/css,text/javascript,application/javascript,application/json
server.compression.min-response-size=1024

# Production Database Configuration
spring.datasource.url=${DB_URL}
spring.datasource.username=${DB_USERNAME}
spring.datasource.password=${DB_PASSWORD}
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

# Production Connection Pool Settings
spring.datasource.hikari.maximum-pool-size=${DB_POOL_SIZE:20}
spring.datasource.hikari.minimum-idle=${DB_POOL_MIN_IDLE:10}
spring.datasource.hikari.connection-timeout=${DB_CONNECTION_TIMEOUT:30000}
spring.datasource.hikari.idle-timeout=${DB_IDLE_TIMEOUT:600000}
spring.datasource.hikari.max-lifetime=${DB_MAX_LIFETIME:1800000}
spring.datasource.hikari.leak-detection-threshold=${DB_LEAK_DETECTION:60000}

# Production JPA Settings
spring.jpa.hibernate.ddl-auto=${JPA_DDL_AUTO:validate}
spring.jpa.show-sql=${JPA_SHOW_SQL:false}
spring.jpa.properties.hibernate.format_sql=${JPA_FORMAT_SQL:false}
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQLDialect
spring.jpa.properties.hibernate.jdbc.batch_size=20
spring.jpa.properties.hibernate.order_inserts=true
spring.jpa.properties.hibernate.order_updates=true

# Production Async Configuration
spring.task.execution.pool.core-size=${ASYNC_CORE_SIZE:10}
spring.task.execution.pool.max-size=${ASYNC_MAX_SIZE:20}
spring.task.execution.pool.queue-capacity=${ASYNC_QUEUE_CAPACITY:100}
spring.task.execution.thread-name-prefix=pgb4-async-

# Production Logging Configuration
logging.level.root=${LOG_LEVEL:WARN}
logging.level.com.gtcafe.messageboard=${APP_LOG_LEVEL:INFO}
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n
logging.pattern.file=%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n
logging.file.name=${LOG_FILE:/var/log/pgb4/application.log}
logging.file.max-size=${LOG_MAX_SIZE:10MB}
logging.file.max-history=${LOG_MAX_HISTORY:30}

# Production Management and Monitoring
management.endpoints.web.exposure.include=${ACTUATOR_ENDPOINTS:health,info,metrics,prometheus}
management.endpoint.health.show-details=${HEALTH_SHOW_DETAILS:never}
management.endpoint.health.show-components=always
management.health.db.enabled=true
management.health.diskspace.enabled=true
management.metrics.export.prometheus.enabled=${PROMETHEUS_ENABLED:true}

# Security Headers
server.servlet.session.cookie.secure=${COOKIE_SECURE:true}
server.servlet.session.cookie.http-only=${COOKIE_HTTP_ONLY:true}
server.servlet.session.cookie.same-site=${COOKIE_SAME_SITE:strict}

# Application Information
info.app.name=${APP_NAME:PGB4 Message Board}
info.app.version=${APP_VERSION:@project.version@}
info.app.description=${APP_DESCRIPTION:Message Board Application - Production}
info.app.environment=production
info.build.time=${BUILD_TIME:@timestamp@}